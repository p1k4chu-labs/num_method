<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Jacobi Method Solver</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body class="text-gray-200">

    <a href="../index.html" class="fixed top-6 left-6 z-20 bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center space-x-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
        </svg>
        <span class="hidden sm:inline">Back to Home</span>
    </a>

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-5xl">
        
        <header class="text-center mb-8">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400">Advanced Jacobi Method Solver</h1>
            <p class="mt-2 text-lg text-gray-400">Solve Ax = b with detailed iteration analysis.</p>
        </header>

        <div class="max-w-5xl mx-auto mb-8">
            <details id="method-details" class="glass-card rounded-lg overflow-hidden transition-all duration-300">
                <summary class="p-4 cursor-pointer flex justify-between items-center font-semibold text-lg text-white hover:bg-gray-700/50 transition-colors">
                    What is the Jacobi Method?
                    <svg class="w-5 h-5 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </summary>
                <div class="p-6 border-t border-gray-700 text-gray-300 space-y-4 prose prose-invert max-w-none">
                    <ul>
                        <li>The <strong>Jacobi Method</strong> is an iterative algorithm for solving a system of linear equations, <span class="math-formula-inline">Ax = b</span>.</li>
                        <li>It starts with an initial guess and repeatedly refines it to converge towards the solution.</li>
                        <li>A key feature is that it uses only values from the previous iteration (<span class="math-formula-inline">k</span>) to compute the entire new solution vector for the current iteration (<span class="math-formula-inline">k+1</span>).</li>
                    </ul>

                    <h4 class="text-emerald-400 font-semibold">Component-wise Formula</h4>
                    <p>The core of the method is the update rule for each individual component <span class="math-formula-inline">x_i</span> of the solution vector:</p>
                    <div class="formula-box">
                       <span class="text-cyan-300 math-formula">x_{i}^{(k+1)} = \frac{1}{a_{ii}} \left( b_i - \sum_{j \neq i} a_{ij}x_{j}^{(k)} \right)</span>
                    </div>

                    <h4 class="text-emerald-400 font-semibold">Matrix Form</h4>
                    <p>The entire iterative process can be expressed more concisely in matrix form.</p>
                    <div class="formula-box">
                        <span class="text-cyan-300 math-formula">x^{(k+1)} = Hx^{(k)} + C</span>
                    </div>
                    <p>Where the components are derived by splitting the matrix <span class="math-formula-inline">A</span> into its Diagonal (<span class="math-formula-inline">D</span>), Lower (<span class="math-formula-inline">L</span>), and Upper (<span class="math-formula-inline">U</span>) parts:</p>
                    <ul>
                        <li>
                            <p class="mb-1">The <strong>Iteration Matrix (H)</strong>, which must have a spectral radius less than 1 for convergence, is:</p>
                            <div class="formula-box">
                               <span class="text-cyan-300 math-formula">H_J = -D^{-1}(L+U)</span>
                            </div>
                        </li>
                        <li>
                            <p class="mb-1">The <strong>Constant Vector (C)</strong> is:</p>
                            <div class="formula-box">
                               <span class="text-cyan-300 math-formula">C_J = D^{-1}b</span>
                            </div>
                        </li>
                    </ul>

                    <!-- SOR Method Details -->
                    <details id="sor-details" class="glass-card rounded-lg overflow-hidden transition-all duration-300 mt-6">
                        <summary class="p-4 cursor-pointer flex justify-between items-center font-semibold text-lg text-white hover:bg-gray-700/50 transition-colors">
                            What is the SOR Method (using Jacobi Scheme)?
                            <svg class="w-5 h-5 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </summary>
                        <div class="p-6 border-t border-gray-700 text-gray-300 space-y-4 prose prose-invert max-w-none">
                            <p>This is an extension of the Jacobi method that often accelerates convergence. It introduces a <strong>relaxation factor</strong>, <span class="math-formula-inline">\omega</span>, to control the step size of the update.</p>
                            <ul>
                                <li>If <span class="math-formula-inline">\omega = 1</span>, the method is identical to the standard Jacobi method.</li>
                                <li>If <span class="math-formula-inline">0 < \omega < 1</span>, it is called <strong>under-relaxation</strong>, which can stabilize convergence.</li>
                                <li>If <span class="math-formula-inline">\omega > 1</span>, it is called <strong>over-relaxation</strong>, which can speed up convergence if the system is suitable.</li>
                            </ul>

                            <h4 class="text-white">Component-wise Formula</h4>
                            <p>The update rule is modified to be a weighted average between the old value and the new Jacobi value:</p>
                            <div class="formula-box">
                                <span class="text-cyan-300 math-formula">x_{i}^{(k+1)} = (1-\omega)x_{i}^{(k)} + \omega \left[ \frac{1}{a_{ii}} \left( b_i - \sum_{j \neq i} a_{ij}x_{j}^{(k)} \right) \right]</span>
                            </div>

                            <h4 class="text-white">Matrix Formula</h4>
                            <p>The iteration matrix for this scheme (often called JOR) is a combination of the Identity matrix (<span class="math-formula-inline">I</span>) and the Jacobi iteration matrix (<span class="math-formula-inline">H_J</span>):</p>
                            <div class="formula-box">
                                <span class="text-cyan-300 math-formula">H_{\text{JOR}} = (1-\omega)I + \omega H_{\text{J}}</span>
                            </div>
                        </div>
                    </details>
                </div>
            </details>
        </div>

        <main class="glass-card p-6 rounded-2xl shadow-2xl space-y-8">
            <section>
                <h2 class="text-2xl font-semibold border-b border-gray-600 pb-3 mb-4 text-white">1. System Setup</h2>
                <div>
                    <label for="matrix-size" class="font-medium text-gray-300 mb-2 block">Number of Equations (n)</label>
                    <select id="matrix-size" class="form-select w-full md:w-1/2 p-2 bg-gray-900 border border-gray-600 rounded-lg focus:outline-none transition">
                        <option>2</option><option selected>3</option><option>4</option><option>5</option>
                    </select>
                </div>
            </section>

            <section>
                <h2 class="text-2xl font-semibold border-b border-gray-600 pb-3 mb-4 text-white">2. Input Matrix (A) and Vector (b)</h2>
                <div id="matrix-container" class="overflow-x-auto custom-scrollbar"></div>
            </section>

            <section>
                <h2 class="text-2xl font-semibold border-b border-gray-600 pb-3 mb-4 text-white">3. Parameters</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="tolerance" class="block font-medium text-gray-300 mb-1">Tolerance (&epsilon;)</label>
                        <input type="text" id="tolerance" value="0.0001" class="form-input w-full p-2 bg-gray-900 border border-gray-600 rounded-lg focus:outline-none transition">
                    </div>
                    <div>
                        <label for="max-iterations" class="block font-medium text-gray-300 mb-1">Max Iterations</label>
                        <input type="number" id="max-iterations" value="100" class="form-input w-full p-2 bg-gray-900 border border-gray-600 rounded-lg focus:outline-none transition">
                    </div>
                </div>
                <!-- SOR Method Switch -->
                <div class="mt-6 p-4 bg-gray-900/50 rounded-lg">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold text-white">Enable SOR Method</h3>
                        <div class="flex items-center space-x-3">
                            <label for="sor-switch" class="text-sm font-medium text-gray-300">Off / On</label>
                            <div class="relative inline-block w-10 align-middle select-none">
                                <input type="checkbox" id="sor-switch" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"/>
                                <label for="sor-switch" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-700 cursor-pointer"></label>
                            </div>
                        </div>
                    </div>
                    <div id="sor-omega-container" class="hidden mt-4">
                        <label for="sor-omega" class="block font-medium text-gray-300 mb-1">Relaxation Factor (&omega;)</label>
                        <input type="text" id="sor-omega" value="1.2" class="form-input w-full md:w-1/2 p-2 bg-gray-900 border border-gray-600 rounded-lg focus:outline-none transition">
                        <p class="text-xs text-gray-400 mt-2">Typically 0 < &omega; < 2. (&omega;=1 is standard Jacobi)</p>
                    </div>
                </div>
            </section>
            
            <section>
                 <h2 class="text-2xl font-semibold border-b border-gray-600 pb-3 mb-4 text-white">4. Actions</h2>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                    <button id="solve-btn" class="group w-full bg-gradient-to-r from-green-500 to-teal-500 text-white font-bold py-3 px-4 rounded-lg text-lg flex items-center justify-center gap-2 transition-transform hover:scale-105 shadow-lg">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-6m-3 6v-3m-3 3h.01M12 3a9 9 0 11-9 9 9 9 0 019-9z"></path></svg>
                        <span>Solve System</span>
                    </button>
                    <button id="randomize-btn" class="group w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white font-semibold py-3 px-6 rounded-md flex items-center justify-center gap-2 transition-transform hover:scale-105 shadow-lg">
                       <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                       <span>Randomize</span>
                    </button>
                    <button id="reset-btn" class="group w-full bg-gray-600 text-white font-semibold py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-transform hover:scale-105 shadow-lg">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h5M20 20v-5h-5"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 11a8 8 0 018-8v5l-3-3 3 3V3a8 8 0 018 8m0 5a8 8 0 01-8 8v-5l3 3-3-3v5a8 8 0 01-8-8"></path></svg>
                        <span>Reset</span>
                    </button>
                </div>
            </section>

            <section id="result-section" class="hidden">
                <h2 class="text-2xl font-semibold border-b border-gray-600 pb-3 mb-4 text-white">5. Results</h2>
                <div id="result-output" class="space-y-6"></div>
            </section>

        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script>
    <script>
        function renderAllMath(rootElement = document) {
            const mathElements = rootElement.querySelectorAll('.math-formula, .math-formula-inline');
            mathElements.forEach(el => {
                if (el.getAttribute('data-rendered')) return;
                const formula = el.textContent;
                const isInline = el.classList.contains('math-formula-inline');
                try {
                    katex.render(formula, el, {
                        throwOnError: false,
                        displayMode: !isInline
                    });
                    el.setAttribute('data-rendered', 'true');
                } catch (e) {
                    console.error("KaTeX rendering error:", e);
                    el.textContent = `Error: ${formula}`;
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderAllMath();
            const detailsElement = document.getElementById('method-details');
            if (detailsElement) {
                detailsElement.addEventListener('toggle', function() {
                    if (this.open) {
                        renderAllMath(this);
                    }
                });
            }
        });
    </script>
    <script src="script.js"></script>
</body>
</html>